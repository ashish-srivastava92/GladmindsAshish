{% extends "base_template.html" %}

{% block style %}
<link href="/static/css/portal.css" rel="stylesheet">
{% endblock %}

{% block body %}
	<h3 class="text-center">ASC-Monthly Coupon Details </h3>
	<div class="container">
	   <div class="col-md-3">
	   </div>
		<div class="col-md-9">
			<div class="row">
            	<div class="col-md-3 form-group">
                <label class="control-label">Month</label>
                <select class="form-control" name="month" id="month" required>
                    	<option value="">Select Month</option>
                      	{% for month in month %}
                     		 <option value="{{month}}">{{month}}</option>
                      	{% endfor %}
                    </select>
                </div>
                <div class="col-md-3 form-group">
                   <label class="control-label">Year</label>
                   <select class="form-control" name="year" id="year" required>
                    	<option value="">Select Year</option>
                      	{% for year in year %}
                     		 <option value="{{year}}">{{year}}</option>
                      	{% endfor %}
                    </select>
                 </div>
               <div class="col-md-6 form-group">  
                 <button onclick = "getDataByDate()" class="btn btn-primary" style="margin-top:24px;">
                 Submit
	            </button>
              </div>
            </div>
		</div>
		{% if not data %}
		<h4 class='text-center'>
			Sorry, NO Data Available.
			yet.
		</h4>
		{% elif data.length != 0 %}
		  <table id="ascReport" class="table  table-bordered" >
            <thead>
				<tr>
				    <th>ASC Id</th>
					<th>Address</th>
				{% for date in range %}	
					<th width="70%" id="#{{date}}">{{date}}{{mon}}</th>
			    {% endfor %}		
				</tr>
			</thead>
        <tbody>
				{% for coupons in data %}
				<tr> 
				    <td>
					  {{coupons.id|default_if_none:""}}
					</td>
					<td>{{coupons.address|default_if_none:""}}</td>
					{% for key,values in coupons.coupon_closed.items %}
					   <td>{{values|default_if_none:""}}</td> 
					{% endfor %}
			</tr>
				{% endfor %}
		</tbody>
		</table>
		{% endif %}
	</div>

{% endblock %} 
{% block dependency%}
<script src="/static/js/portal/main.js"></script>
<script src="/static/js/table_data.js"></script>
<script src="/static/js/table_data_bootstrap.js"></script>

<script>
$(document).ready(function() {
    $('#ascReport').dataTable();
} );

$(function() {
	$('.monthYearPicker').datepicker({
		changeMonth: true,
		changeYear: true,
		showButtonPanel: true,
		dateFormat: 'MM yy'
	}).focus(function() {
		var thisCalendar = $(this);
		$('.ui-datepicker-calendar').detach();
		$('.ui-datepicker-close').click(function() {
var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
thisCalendar.datepicker('setDate', new Date(year, month, 1));
		});
	});
});
</script>
{% endblock dependency %}